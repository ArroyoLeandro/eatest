(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{9642:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[userId]/contratar",function(){return a(7181)}])},7959:function(e,t,a){"use strict";var n=a(5893),o=a(7294),r=a(3935);function i(e,t){var a=e.children,i=e.initialValue,l=void 0!==i&&i,s=(0,o.useState)(l),c=s[0],u=s[1],d=(0,o.useCallback)((function(){return u(!1)}),[]);(0,o.useImperativeHandle)(t,(function(){return{openModal:function(){return u(!0)},closeModal:d}}),[d]);var p=(0,o.useCallback)((function(e){27===e.keyCode&&d()}),[d]);(0,o.useEffect)((function(){return c&&(document.addEventListener("keydown",p,!1),document.body.classList.add("overflow-hidden","pr-4")),function(){document.removeEventListener("keydown",p,!1),document.body.classList.remove("overflow-hidden","pr-4")}}),[p,c]);var f=(0,o.useRef)(),m=(0,o.useRef)(),g=(0,o.useCallback)((function(e){9===e.keyCode&&e.target===f.current&&m.current.focus()}),[]);return(0,o.useEffect)((function(){return c&&document.addEventListener("keyup",g,!1),function(){document.removeEventListener("keyup",g,!1)}}),[g,c]),c?r.createPortal((0,n.jsx)(o.Fragment,{children:(0,n.jsx)("div",{role:"dialog","aria-modal":"true",className:"fixed flex items-center justify-center w-full h-full p-6 bg-black top-0 left-0 bg-opacity-20 z-50",onClick:d,children:(0,n.jsxs)("div",{"aria-label":"Ventana Modal",className:"relative flex max-h-full",onClick:function(e){return e.stopPropagation()},children:[(0,n.jsx)("input",{ref:f,autoFocus:!0,readOnly:!0,"aria-label":"Ventana modal - use Escape para salir",className:"bg-transparent absolute w-1 h-1 transparent border-none outline-none focus:outline-none"}),a,(0,n.jsx)("button",{ref:m,"aria-label":"Cerrar ventana",onClick:d,className:"absolute top-0 right-0 m-2 z-20 flex items-center justify-center w-7 h-7 bg-white rounded-full ",children:(0,n.jsx)("span",{className:"icon-mas text-2xl text-turquesa rotate-45 leading-3"})})]})})}),document.body):null}t.Z=(0,o.forwardRef)(i)},7181:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return re}});var n=a(4051),o=a.n(n),r=a(5893),i=a(7294),l=a(1163),s=a(9669),c=a.n(s),u=a(1955),d=a(1567),p=a(4298),f=a.n(p),m=a(3205),g=a(6361),h=a(9583),v=a(8021),x=(a(286),a(2298));a(4055),a(1059);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function y(e,t,a,n,o,r,i){try{var l=e[r](i),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,o)}function w(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(e){y(r,n,o,i,l,"next",e)}function l(e){y(r,n,o,i,l,"throw",e)}i(void 0)}))}}function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){j(e,t,a[t])}))}return e}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,o,r=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(r.push(n.value),!t||r.length!==t);i=!0);}catch(s){l=!0,o=s}finally{try{i||null==a.return||a.return()}finally{if(l)throw o}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C=function(e){var t,a,n,l,s,u,p,f,m,b,y,C=e.formData,P=e.setFormData,k=e.config,O=e.errors,I=e.setErrors,D=e.position,T=e.setPosition,E=e.initPersona,F=(e.msgDate,e.setMsgDate),_=S((0,d.$)("global"),2),q=(_[0],_[1],(0,x.default)(new Date,"yyyy-MM-dd"),(0,v.ZR)().setConfig),L=(0,i.useState)([]),A=L[0],M=L[1],Z=(0,i.useState)(null),z=Z[0],J=Z[1],$=(0,i.useState)(E),V=$[0],R=$[1],B=(0,i.useState)([]),U=B[0],H=B[1],Y=(0,i.useState)(JSON.parse(localStorage.getItem("planContratar")).personas),X=Y[0],G=Y[1],W=(0,h.Sy)(),K=W.isShared,Q=(W.setIsShared,(0,i.useState)(null)),ee=Q[0],te=Q[1],ae=(0,i.useState)(""),ne=(ae[0],ae[1]),oe=function(){var e=w(o().mark((function e(){var t,a,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/paises");case 3:t=e.sent,a=t.data[0],n=a.map((function(e){var t=e.nombre;return{value:t,label:t}})),M(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){var e;oe(),R(C.datosPersonales),T(0);var t=null===k||void 0===k||null===(e=k.etiquetas)||void 0===e?void 0:e.List_TiposDocumentos.split(",");if(H(t),K){var a,n=null===(a=JSON.parse(localStorage.getItem("planContratar")))||void 0===a?void 0:a.id_store;le(),ie(n)}}),[]);var re=(0,i.useCallback)((function(e){27===e.keyCode&&te(null)}));(0,i.useEffect)((function(){return ee&&document.addEventListener("keydown",re,!1),function(){document.removeEventListener("keydown",re,!1)}}),[re,ee]);var ie=function(){var e=w(o().mark((function e(t){var a,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/config?codigo="+t);case 3:a=e.sent,n=a.data[0],q(n),r=n.etiquetas.List_TiposDocumentos.split(","),H(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=[{minima:0,maxima:20,fijada:19},{minima:21,maxima:75,fijada:30},{minima:76,maxima:85,fijada:80},{minima:86,maxima:90,fijada:88}],t=X.map((function(t){return e.map((function(e){t.edad>=e.minima&&t.edad<=e.maxima&&(t.edadMinima=e.minima,t.edadMaxima=e.maxima)})),t}));G(t)};(0,i.useEffect)((function(){ue()})),(0,i.useEffect)((function(){var e=C.datosPersonales[D],t=E;Object.keys(E).map((function(a){e[a]&&(t[a]=e[a])})),R(t),I(C)}),[D]);var se,ce,ue=function(){if(null!=localStorage.getItem("planContratar")){var e=JSON.parse(localStorage.getItem("planContratar")).personas;if((null==z||e.length!=z.length)&&(J(e),0==D)){var t=!0,a=C.datosPersonales.map((function(e,a){return 18==Object.values(e).length&&(t=!1),e.id=a,e}));if(C.datosPersonales=a,t){var n=C;e=e.map((function(e){return e.fechaNacimiento="",e.id=D,e})),n.datosPersonales=e,P(n)}}}},de=function(e,t){R(N({},V,j({},e,t))),O[D].fechaNacimiento=""};return(0,i.useEffect)((function(){var e=C.datosPersonales;e[D].id=D,e[D]=V,P(N({},C,{datosPersonales:e}))}),[V]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("header",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-8 pb-2 lg:py-6 lg:px-6",children:null===z||void 0===z?void 0:z.map((function(e,t){return(0,r.jsxs)("button",{onClick:function(){T(t)},className:"px-2 lg:px-0 rounded ".concat(t===D?"text-white lg:text-principal bg-principal lg:bg-transparent":"text-gris-medio bg-gris-claro lg:bg-transparent"),children:["Pasajero ",t+1]},t)}))}),(0,r.jsxs)("div",{className:"flex flex-col lg:grid lg:grid-cols-3 gap-4 py-6 px-6 rounded-lg shadow-3xl",children:[(0,r.jsxs)("p",{className:"flex-none col-span-full text-red-600",children:[null===k||void 0===k?void 0:k.etiquetas.Step3_DatosPasajeros," ",X.length>1?"del pasajero de ".concat(X[D].edadMinima," a ").concat(X[D].edadMaxima," a\xf1os"):""]}),(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"name",children:[(0,r.jsx)("input",{name:"name",type:"text",value:null===V||void 0===V?void 0:V.nombre,onChange:function(e){de("nombre",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded focus:outline-none focus:border-gris-medio "}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-4 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=(null===V||void 0===V?void 0:V.nombre)?"scale-75 -translate-y-2 bg-white":"py-3 scale-100"," "),children:null===k||void 0===k?void 0:k.etiquetas.Label_Nombres}),""==(null===V||void 0===V?void 0:V.nombre)&&(0,r.jsx)("span",{className:"text-red-600 text-sm",children:null===(t=O[D])||void 0===t?void 0:t.nombre})]}),(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"apellido",children:[(0,r.jsx)("input",{name:"lastname",type:"text",value:null===V||void 0===V?void 0:V.apellido,onChange:function(e){de("apellido",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded focus:outline-none focus:border-gris-medio"}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-4 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=(null===V||void 0===V?void 0:V.apellido)?"scale-75 -translate-y-2 bg-white":"py-3 scale-100"," "),children:null===k||void 0===k?void 0:k.etiquetas.Label_Apellidos}),""==(null===V||void 0===V?void 0:V.apellido)&&(0,r.jsx)("span",{className:"text-red-600 text-sm",children:null===(a=O[D])||void 0===a?void 0:a.apellido})]}),(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"sexo",children:[(0,r.jsxs)("select",{value:V.sexo,onChange:function(e){de("sexo",e.target.value)},className:"appearance-none w-full py-3 px-4 border border-principal rounded bg-white focus:outline-none focus:border-gris-medio",name:"genre",children:[(0,r.jsx)("option",{value:"",children:"Sexo"}),(0,r.jsx)("option",{value:"femenino",children:"Femenino"}),(0,r.jsx)("option",{value:"masculino",children:"Masculino"})]}),(0,r.jsx)("div",{className:"flex items-center absolute right-0 top-0 h-[50px] pointer-events-none",children:(0,r.jsx)("div",{className:" border-l border-gray-300 px-2 my-auto h-6 text-gray-400 group-hover:text-gray-500 group-focus:text-gray-500 opacity-80","aria-hidden":"true",children:(0,r.jsx)("svg",{height:"20",width:"20",viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",className:"inline-block fill-current stroke-none leading-none",children:(0,r.jsx)("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"})})})}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-4 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=V.sexo?"scale-75 -translate-y-2 bg-white":"opacity-0"," "),children:"Sexo"}),""==(null===V||void 0===V?void 0:V.sexo)&&(0,r.jsx)("span",{className:"text-red-600 text-sm",children:null===(n=O[D])||void 0===n?void 0:n.sexo})]}),(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"nacionalidad",children:[(0,r.jsx)(g.ZP,{name:"nacionalidad",placeholder:null===V||void 0===V?void 0:V.nacionalidad,value:A.filter((function(e){return e.value===(null===V||void 0===V?void 0:V.nacionalidad)})),styles:{menu:function(e,t){return{padding:0}}},className:"selector",options:A,onChange:function(e){return de("nacionalidad",e.value)}}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-4 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=(null===V||void 0===V?void 0:V.nacionalidad)?"scale-75 -translate-y-2 bg-white":"py-3 scale-100"," "),children:null===k||void 0===k?void 0:k.etiquetas.Label_Nacionalidad}),""==(null===V||void 0===V?void 0:V.nacionalidad)&&(0,r.jsx)("span",{className:"text-red-600 text-sm",children:null===(l=O[D])||void 0===l?void 0:l.nacionalidad})]}),(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"sexo",children:[(0,r.jsxs)("select",{value:V.documentoTipo,onChange:function(e){de("documentoTipo",e.target.value)},className:"appearance-none w-full py-3 px-4 border border-principal rounded bg-white focus:outline-none focus:border-gris-medio",name:"genre",children:[(0,r.jsx)("option",{value:"",children:null===k||void 0===k?void 0:k.etiquetas.Label_TipoDocumento}),null===U||void 0===U?void 0:U.map((function(e,t){return(0,r.jsx)("option",{value:e,children:e},t)}))]}),(0,r.jsx)("div",{className:"flex items-center absolute right-0 top-0 h-[50px] pointer-events-none",children:(0,r.jsx)("div",{className:" border-l border-gray-300 px-2 my-auto h-6 text-gray-400 group-hover:text-gray-500 group-focus:text-gray-500 opacity-80","aria-hidden":"true",children:(0,r.jsx)("svg",{height:"20",width:"20",viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",className:"inline-block fill-current stroke-none leading-none",children:(0,r.jsx)("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"})})})}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-4 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 scale-75 -translate-y-2 bg-white",children:"Documento"}),""==(null===V||void 0===V?void 0:V.documentoTipo)&&(0,r.jsx)("span",{className:"text-red-600 text-sm",children:null===(s=O[D])||void 0===s?void 0:s.documentoTipo})]}),(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"dni",children:[(0,r.jsx)("input",{type:"text",name:"dni",value:null===V||void 0===V?void 0:V.documento,onChange:function(e){de("documento",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded focus:outline-none focus:border-gris-medio"}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-4 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=(null===V||void 0===V?void 0:V.documento)?"scale-75 -translate-y-2 bg-white":"py-3 scale-100"," "),children:"N\xfamero"}),""==(null===V||void 0===V?void 0:V.documento)&&(0,r.jsx)("span",{className:"text-red-600 text-sm",children:null===(u=O[D])||void 0===u?void 0:u.documento})]}),(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"fecha",children:[(0,r.jsx)("input",{type:"text",name:"fecha",value:(ce=null===V||void 0===V?void 0:V.fechaNacimiento,ce.replace(/^(\d\d)(\d)$/g,"$1/$2").replace(/^(\d\d\/\d\d)(\d+)$/g,"$1/$2").replace(/[^\d\/]/g,"")),placeholder:"dd/mm/aaaa",onChange:function(e){!function(e,t){var a=/^([0-2][0-9]|3[0-1])(\/|-)(0[1-9]|1[0-2])\2(\d{4})$/.test(e);if(O[D].fechaNacimiento="",R(N({},V,j({},t,e))),a){var n=e.split("/").reverse().join("-");ne(n),te(null),F("")}else F("Formato inv\xe1lido, debe ser: dd/mm/yyyy ")}(e.target.value,"fechaNacimiento")},className:"w-full py-3 px-4 border border-principal rounded focus:outline-none focus:border-gris-medio"}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-4 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 scale-75 -translate-y-2 bg-white ",children:"Fecha de nacimiento"}),(""==(null===V||void 0===V?void 0:V.fechaNacimiento)||(null===(p=O[D])||void 0===p?void 0:p.fechaNacimiento)!=(null===V||void 0===V?void 0:V.fechaNacimiento))&&(0,r.jsx)("span",{className:"text-red-600 text-sm",children:null===(f=O[D])||void 0===f?void 0:f.fechaNacimiento})]}),(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"email",children:[(0,r.jsx)("input",{type:"email",name:"email",value:null===V||void 0===V?void 0:V.email,onChange:function(e){de("email",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded focus:outline-none focus:border-gris-medio"}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-4 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=(null===V||void 0===V?void 0:V.email)?"scale-75 -translate-y-2 bg-white":"py-3 scale-100"," "),children:null===k||void 0===k?void 0:k.etiquetas.Label_Email}),(""==(null===V||void 0===V?void 0:V.email)||(null===(m=O[D])||void 0===m?void 0:m.email)!=(null===V||void 0===V?void 0:V.email))&&(0,r.jsx)("span",{className:"text-red-600 text-sm",children:(se=null===V||void 0===V?void 0:V.email,!/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(se)&&(null===(b=O[D])||void 0===b?void 0:b.email))})]}),(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"tel",children:[(0,r.jsx)("input",{type:"number",name:"telefono",value:null===V||void 0===V?void 0:V.telefono,onChange:function(e){de("telefono",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded focus:outline-none focus:border-gris-medio appearance-none"}),(0,r.jsxs)("span",{className:"absolute pointer-events-none left-4 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=(null===V||void 0===V?void 0:V.telefono)?"scale-75 -translate-y-2 bg-white":"py-3 scale-100"," "),children:[null===k||void 0===k?void 0:k.etiquetas.Label_TelefonoPersona," "]}),""==(null===V||void 0===V?void 0:V.telefono)&&(0,r.jsx)("span",{className:"text-red-600 text-sm",children:null===(y=O[D])||void 0===y?void 0:y.telefono})]})]})]})})};function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function k(e,t,a,n,o,r,i){try{var l=e[r](i),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,o)}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){O(e,t,a[t])}))}return e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,o,r=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(r.push(n.value),!t||r.length!==t);i=!0);}catch(s){l=!0,o=s}finally{try{i||null==a.return||a.return()}finally{if(l)throw o}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return P(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T=function(e){var t,a=e.formData,n=e.setFormData,l=e.config,s=e.errors,u=(e.setErrors,e.position),p=e.setPosition,f=e.initPersona,m=e.errors2,h=e.firstChange,v=(e.setFirstChange,D((0,d.$)("global"),2)),x=v[0],b=(v[1],(0,i.useState)(null)),y=b[0],w=b[1],j=(0,i.useState)(f),N=j[0],S=j[1],C=(0,i.useState)([]),P=C[0],T=C[1];(0,i.useEffect)((function(){p(0),E()}),[]),(0,i.useEffect)((function(){var e=a.datosPersonales[u],t=f;Object.keys(f).map((function(a){e[a]&&(t[a]=e[a])})),S(t)}),[u]),(0,i.useEffect)((function(){F()}));var E=function(){var e,t=(e=o().mark((function e(){var t,a,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/paises");case 3:t=e.sent,a=t.data[0],n=a.map((function(e){var t=e.nombre;return{value:t,label:t}})),T(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(e){k(r,n,o,i,l,"next",e)}function l(e){k(r,n,o,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),F=function(){if(null!=localStorage.getItem("planContratar")){var e=JSON.parse(localStorage.getItem("planContratar")).personas;null!=y&&e.length==y.length||w(e)}};return(0,i.useEffect)((function(){var e=a.datosPersonales;e[u].id=u,h?e.map((function(t,a){var n=N.domicilioCalle,o=N.domicilioCodigoPostal,r=N.domicilioDpto,i=N.domicilioNumero,l=N.domicilioPiso,s=N.localidad,c=N.provincia,u=N.destino;e[a].id=a,e[a].domicilioCalle=n,e[a].domicilioCodigoPostal=o,e[a].domicilioDpto=r,e[a].domicilioNumero=i,e[a].domicilioPiso=l,e[a].localidad=s,e[a].provincia=c,e[a].destino=u,e[a].origen="uruguay"})):(e[u]=N,e[u].origen="uruguay",e[u].id=u),n(I({},a,{datosPersonales:e}))}),[N]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("header",{className:"flex gap-4 py-6 px-6",children:(0,r.jsx)("h1",{className:"text-xl",children:x("formContratar.datosFacturacion")})}),(0,r.jsxs)("div",{className:"flex flex-col lg:grid lg:grid-cols-3 gap-4 py-6 px-6 rounded-lg shadow-3xl",children:[(0,r.jsxs)("div",{className:"flex-none col-span-full mt-4",children:[(0,r.jsx)("h2",{className:"",children:"\xbfA d\xf3nde viaj\xe1s?"}),(0,r.jsx)("p",{className:"text-gris-medio",children:"Selecciona el pais de destino. Si vas a m\xe1s de un pa\xeds deber\xe1s seleccionar uno de ellos."})]}),(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"destino",children:[(0,r.jsx)(g.ZP,{name:"destino",placeholder:null===N||void 0===N?void 0:N.destino,styles:{menu:function(e,t){return{padding:0}}},className:"selector",options:P,value:P.filter((function(e){return e.value===(null===N||void 0===N?void 0:N.destino)})),onChange:function(e){return t="destino",a=e.value,void S(I({},N,O({},t,a)));var t,a}}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-4 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=(null===N||void 0===N?void 0:N.destino)?"scale-75 -translate-y-2 bg-white":"py-3 scale-100"," "),children:"Destino"}),""==(null===N||void 0===N?void 0:N.destino)&&(0,r.jsx)("span",{className:"text-red-600",children:null===(t=s[u])||void 0===t?void 0:t.destino})]})]}),(0,r.jsxs)("div",{className:"flex flex-col lg:grid lg:grid-cols-3 gap-4 py-6 px-6 rounded-lg shadow-3xl",children:[(0,r.jsxs)("div",{className:"flex-none col-span-full mt-4",children:[(0,r.jsx)("h2",{className:"",children:null===l||void 0===l?void 0:l.etiquetas.Title_ContactoEmergencia}),(0,r.jsx)("p",{className:"text-gris-medio",children:null===l||void 0===l?void 0:l.etiquetas.Label_SolicitudDatosEmergencia})]}),(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"nameContacto",children:[(0,r.jsx)("input",{type:"text",value:null===a||void 0===a?void 0:a.nameContacto,onChange:function(e){n(I({},a,{nameContacto:e.target.value}))},className:"w-full py-3 px-4 border border-principal rounded focus:outline-none focus:border-gris-medio"}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-3 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=(null===a||void 0===a?void 0:a.nameContacto)?"scale-75 -translate-y-2 bg-white":"py-3 scale-100"," "),children:null===l||void 0===l?void 0:l.etiquetas.Label_Nombres}),""==(null===a||void 0===a?void 0:a.nameContacto)&&(0,r.jsx)("span",{className:"text-red-600",children:null===m||void 0===m?void 0:m.nameContacto})]}),(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"apellidoContacto",children:[(0,r.jsx)("input",{type:"text",value:null===a||void 0===a?void 0:a.apellidoContacto,onChange:function(e){n(I({},a,{apellidoContacto:e.target.value}))},className:"w-full py-3 px-4 border border-principal rounded focus:outline-none focus:border-gris-medio"}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-3 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=(null===a||void 0===a?void 0:a.apellidoContacto)?"scale-75 -translate-y-2 bg-white":"py-3 scale-100"," "),children:null===l||void 0===l?void 0:l.etiquetas.Label_Apellidos}),""==(null===a||void 0===a?void 0:a.apellidoContacto)&&(0,r.jsx)("span",{className:"text-red-600",children:null===m||void 0===m?void 0:m.apellidoContacto})]}),(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"telContacto",children:[(0,r.jsx)("input",{type:"number",value:null===a||void 0===a?void 0:a.telContacto,onChange:function(e){n(I({},a,{telContacto:e.target.value}))},className:"w-full py-3 px-4 border border-principal rounded focus:outline-none focus:border-gris-medio"}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-3 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=(null===a||void 0===a?void 0:a.telContacto)?"scale-75 -translate-y-2 bg-white":"py-3 scale-100"," "),children:null===l||void 0===l?void 0:l.etiquetas.Label_TelefonoPersona}),""==(null===a||void 0===a?void 0:a.telContacto)&&(0,r.jsx)("span",{className:"text-red-600",children:null===m||void 0===m?void 0:m.telContacto})]})]})]})})},E=a(6054),F=(a(1310),a(3869));function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function q(e,t,a,n,o,r,i){try{var l=e[r](i),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,o)}function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,o,r=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(r.push(n.value),!t||r.length!==t);i=!0);}catch(s){l=!0,o=s}finally{try{i||null==a.return||a.return()}finally{if(l)throw o}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var M=function(e){var t,a=e.formData,n=e.setFormData,l=e.initForm,s=(e.position,A((0,d.$)("global"),2)),p=s[0],f=(s[1],(0,x.default)(new Date,"yyyy"),(0,i.useState)(null)),m=(f[0],f[1],(0,i.useState)(l)),g=m[0],h=m[1],v=(0,i.useState)(!1),b=(v[0],v[1],(0,i.useState)("")),y=b[0],w=b[1],j=(0,i.useState)(""),N=j[0],S=j[1],C=((0,i.useRef)(!1),(0,i.useState)([])),P=C[0],k=C[1],O=(0,i.useState)(null!==(t=u.Z.get("location"))&&void 0!==t?t:"lat"),I=(O[0],O[1],JSON.parse(localStorage.getItem("planContratar")).medioDePago);(0,i.useEffect)((function(){""!=a.mesVencimiento&&S(a.mesVencimiento+"/"+a.anioVencimiento),h(a),"decidir"!=I.toLowerCase()&&D();var e=JSON.parse(localStorage.getItem("planContratar")),t=[];t.push({item_id:e.producto.id,item_name:e.producto.nombreB2C,price:e.precio,local_price:e.precioEnPesos,currency:"USD",monedaId:e.monedaId}),F.X9(t)}),[]);var D=function(){var e,t=(e=o().mark((function e(){var t,a,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=u.Z.get("location").toUpperCase(),e.next=4,c().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/dlocal/metodosdepago?codigoUsuario="+t);case 4:a=e.sent,n=a.data[0],r=[],n.map((function(e){r.push({name:e.name,id:e.id})})),k(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.response.data);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(e){q(r,n,o,i,l,"next",e)}function l(e){q(r,n,o,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),T=function(e,t){"numeroTarjeta"==e&&/[^0-9-\s]+/.test(t)||h(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){L(e,t,a[t])}))}return e}({},g,L({},e,t)))};(0,i.useEffect)((function(){n(g)}),[g]);var _=function(e){return e.replace(/[^0-9]/g,"").replace(/^([2-9])$/g,"0$1").replace(/^(1{1})([3-9]{1})$/g,"0$1/$2").replace(/^0{1,}/g,"0").replace(/^([0-1]{1}[0-9]{1})([0-9]{1,2}).*/g,"$1/$2")},M=function(e){for(var t=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),a=t&&t[0]||"",n=[],o=a.length,r=0;r<o;r+=4)n.push(a.substring(r,r+4));return n.length?n.join(" "):e};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("header",{className:"flex gap-4 py-6 px-6",children:(0,r.jsx)("h1",{className:"text-xl",children:p("formContratar.formaPago")})}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 py-6 px-6 rounded-lg shadow-3xl overflow-hidden",children:[(0,r.jsx)("p",{className:"flex-none col-span-full mb-2",children:p("formContratar.formaPagoSubtitulo")}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-10",children:["decidir"==(null===I||void 0===I?void 0:I.toLowerCase())?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"sm:order-2 row-span-full",children:(0,r.jsx)(E.Z,{number:a.numeroTarjeta,expiry:N,focused:y,cvc:a.codigoSeguridad,name:a.titular,acceptedCards:["visa","mastercard","amex"],placeholders:{name:"Nombre y Apellido"},locale:{valid:"vencimiento"}})})}):null,(0,r.jsxs)("div",{className:"flex-1 flex flex-col lg:grid lg:grid-cols-2 gap-4 sm:order-1 ",children:["decidir"==(null===I||void 0===I?void 0:I.toLowerCase())&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("label",{className:"flex-1 relative group ",htmlFor:"cc-number",children:[(0,r.jsx)("input",{type:"tel",name:"cc-number",id:"cc_pan",value:M(null===a||void 0===a?void 0:a.numeroTarjeta),onChange:function(e){T("numeroTarjeta",e.target.value)},onFocus:function(e){return w("cc-number")},className:"w-full py-3 px-4 border border-principal rounded focus:outline-none focus:border-gris-medio"}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-3 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=M(null===a||void 0===a?void 0:a.numeroTarjeta)?"scale-75 -translate-y-2 bg-white":"py-3 scale-100"," "),children:"Nro de Tarjeta"})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("label",{className:"flex-1 relative group ",htmlFor:"cc-exp",children:[(0,r.jsx)("input",{type:"tel",placeholder:"mm/aa",pattern:"\\d\\d/\\d\\d",name:"cc-exp",id:"cc_expiration",value:_(N),onChange:function(e){var t;t=e.target.value,S(t),T("mesVencimiento",t)},onFocus:function(e){return w("cc-exp")},className:"w-full py-3 px-4 border border-principal rounded focus:outline-none focus:border-gris-medio"}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-3 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:opacity-100 top-0 ".concat(""!=_(N)?"scale-75 -translate-y-2 bg-white":"opacity-0"," "),children:"Vencimiento"})]}),(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"cvc",children:[(0,r.jsx)("input",{type:"tel",value:null===a||void 0===a?void 0:a.codigoSeguridad,name:"cvc",id:"cc_cvv",onFocus:function(){return w("cvc")},onChange:function(e){T("codigoSeguridad",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded focus:outline-none focus:border-gris-medio"}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-3 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=(null===a||void 0===a?void 0:a.codigoSeguridad)?"scale-75 -translate-y-2 bg-white":"py-3 scale-100"," "),children:"C\xf3d. seg."})]})]})]}),"decidir"!=(null===I||void 0===I?void 0:I.toLowerCase())?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("label",{className:"mt-4 flex-1 relative group",htmlFor:"tipoTarjeta",children:[(0,r.jsxs)("select",{name:"tipo",className:"appearance-none w-full py-3 px-3 border border-principal rounded bg-white focus:outline-none focus:border-gris-medio",onChange:function(e){T("tipoTarjeta",e.target.value)},children:[(0,r.jsx)("option",{value:"",children:"Tipo de Tarjeta"}),P.map((function(e){return(0,r.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),(0,r.jsx)("div",{className:"flex items-center absolute right-0 top-0 h-[50px] pointer-events-none",children:(0,r.jsx)("div",{className:" border-l border-gray-300 px-2 my-auto h-6 text-gray-400 group-hover:text-gray-500 group-focus:text-gray-500 opacity-80","aria-hidden":"true",children:(0,r.jsx)("svg",{height:"20",width:"20",viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",className:"inline-block fill-current stroke-none leading-none",children:(0,r.jsx)("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"})})})}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-4 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=(null===a||void 0===a?void 0:a.tipoTarjeta)?"scale-75 -translate-y-2 bg-white":"opacity-0"," "),children:p("formContratar.tipoTarjeta")})]}),(0,r.jsx)("div",{id:"card-field",className:"mt-4 flex-1 relative group border border-principal py-3 px-1 w-full text-principal text-xl font-bold"})]}):null,"decidir"==(null===I||void 0===I?void 0:I.toLowerCase())&&(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"cuotas",children:[(0,r.jsxs)("select",{name:"cuotas",className:"appearance-none w-full py-3 px-3 border border-principal rounded bg-white focus:outline-none focus:border-gris-medio",onChange:function(e){T("cuotas",e.target.value)},children:[(0,r.jsx)("option",{value:"1",defaultValue:!0,children:"1"}),(0,r.jsx)("option",{value:"2",children:"2"}),(0,r.jsx)("option",{value:"3",children:"3"})]}),(0,r.jsx)("div",{className:"flex items-center absolute right-0 top-0 h-[50px] pointer-events-none",children:(0,r.jsx)("div",{className:" border-l border-gray-300 px-2 my-auto h-6 text-gray-400 group-hover:text-gray-500 group-focus:text-gray-500 opacity-80","aria-hidden":"true",children:(0,r.jsx)("svg",{height:"20",width:"20",viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",className:"inline-block fill-current stroke-none leading-none",children:(0,r.jsx)("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"})})})}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-4 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=(null===a||void 0===a?void 0:a.cuotas)?"scale-75 -translate-y-2 bg-white":"opacity-0"," "),children:p("formContratar.cuotas")})]}),(0,r.jsx)("h2",{className:"flex-none col-span-full -mb-4",children:p("formContratar.titularTarjeta")}),(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"cc-name",children:[(0,r.jsx)("input",{type:"text",name:"cc-name",value:null===a||void 0===a?void 0:a.titular,onFocus:function(){return w("cc-name")},onChange:function(e){T("titular",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded focus:outline-none focus:border-gris-medio"}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-3 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=(null===a||void 0===a?void 0:a.titular)?"scale-75 -translate-y-2 bg-white":"py-3 scale-100"," "),children:"Nombre y Apellido"})]}),(0,r.jsxs)("label",{className:"flex-1 relative group",htmlFor:"dniTitular",children:[(0,r.jsx)("input",{type:"number",name:"dniTitular",value:null===a||void 0===a?void 0:a.dniTitular,onFocus:function(){return w("dniTitular")},onChange:function(e){T("dniTitular",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded focus:outline-none focus:border-gris-medio"}),(0,r.jsx)("span",{className:"absolute pointer-events-none left-3 px-1 text-gris-medio transition-all ease-out origin-left whitespace-nowrap group-focus-within:-translate-y-2 group-focus-within:scale-75 group-focus-within:bg-white group-focus-within:py-0 top-0 ".concat(""!=(null===a||void 0===a?void 0:a.dniTitular)?"scale-75 -translate-y-2 bg-white":"py-3 scale-100"," "),children:"Documento Nro."})]})]})]})]})]})})},Z=a(2163),z=a(2388),J=a(818),$=a(7959),V=a(6983);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function B(e,t,a,n,o,r,i){try{var l=e[r](i),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,o)}function U(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(e){B(r,n,o,i,l,"next",e)}function l(e){B(r,n,o,i,l,"throw",e)}i(void 0)}))}}function H(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){H(e,t,a[t])}))}return e}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,o,r=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(r.push(n.value),!t||r.length!==t);i=!0);}catch(s){l=!0,o=s}finally{try{i||null==a.return||a.return()}finally{if(l)throw o}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var G=function(e){var t,a=function(e){var t=new Date,a=e.split("/").reverse(),n=new Date(a[0],a[1],a[2]),o=t.getFullYear()-n.getFullYear(),r=t.getMonth()-n.getMonth();return(r<0||0===r&&t.getDate()<n.getDate())&&o--,o},n=X((0,d.$)("global"),2),s=n[0],p=(n[1],(0,l.useRouter)()),f={id:0,nombre:"",apellido:"",sexo:"",nacionalidad:"",documento:"",documentoTipo:"",fechaNacimiento:"",email:e.correo,telefono:"",domicilioCalle:"",domicilioNumero:"",domicilioPiso:"",domicilioDpto:"",domicilioCodigoPostal:"",localidad:"",provincia:"",destino:""},m={datosPersonales:[],titular:"",dniTitular:"",numeroTarjeta:"",mesVencimiento:"",anioVencimiento:"",codigoSeguridad:"",cuotas:"1",tipoTarjeta:"",nameContacto:"",apellidoContacto:"",telContacto:""},g=(0,h.Sy)(),x=g.isShared,b=(g.setIsShared,(0,i.useState)(0)),y=b[0],w=b[1],j=(0,i.useState)(m),N=j[0],S=j[1],P=(0,i.useState)(null),k=(P[0],P[1]),O=(0,i.useState)(m),I=O[0],D=O[1],E=(0,v.ZR)(),_=E.config,q=E.setConfig,L=X((0,z._)("etiquetas",""),2),A=L[0],R=(L[1],(0,i.useState)(!1)),B=R[0],H=R[1],G=(0,i.useState)(0),W=G[0],K=G[1],Q=(0,i.useState)(!0),ee=Q[0],te=Q[1],ae=(0,i.useState)(null),ne=ae[0],oe=ae[1],re=(0,i.useState)(!0),ie=re[0],le=re[1],se=(0,i.useState)(!1),ce=se[0],ue=se[1],de=(0,i.useRef)(null),pe=(0,i.useState)(""),fe=pe[0],me=pe[1],ge=(0,i.useState)("Fecha Invalida. El formato debe ser: dd/mm/yyyy"),he=ge[0],ve=ge[1],xe=(0,i.useState)(null),be=xe[0],ye=xe[1],we=(0,i.useState)(null),je=we[0],Ne=we[1],Se=(0,i.useRef)(null),Ce=(0,i.useState)(null===(t=JSON.parse(localStorage.getItem("planContratar")))||void 0===t?void 0:t.personas),Pe=Ce[0],ke=Ce[1],Oe=function(){var e;null===(e=Se.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,i.useEffect)((function(){localStorage.getItem("etiquetas")?q(A):Ie()}),[]),(0,i.useEffect)((function(){var e;ke(null===(e=JSON.parse(localStorage.getItem("planContratar")))||void 0===e?void 0:e.personas)}),[localStorage.getItem("planContratar")]),(0,i.useEffect)((function(){var e;2==y&&("decidir"!=(null===(e=JSON.parse(localStorage.getItem("planContratar")))||void 0===e?void 0:e.medioDePago).toLowerCase()&&Ae())}),[y]);var Ie=function(){var e=U(o().mark((function e(){var t,a,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=u.Z.get("location")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,c().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/config?codigo="+t);case 6:a=e.sent,n=a.data[0],q(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.response.data);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),De=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(-1==t){var a=Fe(),n=I;n.datosPersonales=a,D(n);var o=[];if(a.map((function(e,t){e.valid||o.push(t)})),o.length>0){if(0==e&&W<N.datosPersonales.length-1)return void K(o[0])}else if(0==e&&W<N.datosPersonales.length-1)return void K((function(e){return e+1}))}var r=!1;switch(e){case 0:var i=Fe(),l=I;l.datosPersonales=i,D(l);var s=!0;i.map((function(e,t){e.valid||(s=!1)})),r=s,te(s),r&&w((function(e){return e+1}));break;case 1:var c=_e(),u=I;u.datosPersonales=c,D(u);var d=!0;c.map((function(e){e.valid||(d=!1)})),d&&(u.valid=!0,Object.keys(N).map((function(e,t){switch(e){case"nameContacto":""==Object.values(N)[t]&&(u.nameContacto="Campo requerido",u.valid=!1);break;case"apellidoContacto":""==Object.values(N)[t]&&(u.apellidoContacto="Campo requerido",u.valid=!1);break;case"telContacto":""==Object.values(N)[t]&&(u.telContacto="Campo requerido",u.valid=!1)}}))),r=d&&u.valid,te(d&&u.valid),r&&w((function(e){return e+1}));break;case 2:(r=Ze())?Le():(ue(!1),me("Tarjeta o Datos invalidos"),de.current.openModal())}r&&1==e&&Te()},Te=function(){var t=U(o().mark((function t(){var n,r,i,l,s,d,p,f;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=u.Z.get("cotizacionID"),t.next=4,c().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/cotizacion?cotizacionId="+n);case 4:r=t.sent,i=r.data[0],l=i,s=Object.entries(N.datosPersonales),d=s.filter((function(e,t){return t<19})),p=Object.fromEntries(d),f=[],l.personas=l.personas.map((function(e,t){var n=p[t].fechaNacimiento.split("/").reverse();return e.id=0,e.nombre=p[t].nombre,e.apellido=p[t].apellido,e.documento=p[t].documento,e.documentoTipo=p[t].documentoTipo,e.sexo="masculino"==p[t].sexo.toLowerCase()?"H":"M",e.email=p[t].email,e.telefono=p[t].telefono,e.edad=a(p[t].fechaNacimiento),f.push(e.edad),e.contactoEmergencia=p[t].contactoEmergencia,e.fechaNacimiento=n.join("-"),e.domicilioCalle=p[t].domicilioCalle,e.domicilioNumero=p[t].domicilioNumero,e.domicilioPiso=p[t].domicilioPiso,e.domicilioDpto=p[t].domicilioDpto,e.domicilioCodigoPostal=p[t].domicilioCodigoPostal,e.localidad=p[t].localidad,e.provincia=p[t].provincia,e.nacionalidad=p[t].nacionalidad,e.destino=p[t].destino,e.origen="uruguay",e.anio=parseInt(n[0]),e.mes=parseInt(n[1]),e.dia=parseInt(n[2]),e})),l.productos=[e.producto],l.productos[0].personas=l.personas,l.productos[0].edades=f,l.edades=f,l.nombreEmergencia=N.apellidoContacto,l.apellidoEmergencia=N.nameContacto,l.telefonoEmergencia=N.telContacto,l.terminosCondicionesAceptados=!0,k(l),Ee(l),t.next=28;break;case 24:t.prev=24,t.t0=t.catch(0),console.log(t.t0.response.data),H(!1);case 28:case"end":return t.stop()}}),t,null,[[0,24]])})));return function(){return t.apply(this,arguments)}}(),Ee=function(){var e=U(o().mark((function e(t){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,oe(t.personas),e.next=4,c().post("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/cotizacion/datospersonales",t);case 4:return a=e.sent,e.next=7,a.data[0];case 7:e.sent,te(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.response.data),H(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){for(var e=[],t=0;t<N.datosPersonales.length;t++)e.push(Y({},N.datosPersonales[t],{nombre:"",apellido:"",sexo:"",nacionalidad:"",documento:"",documentoTipo:"",fechaNacimiento:"",email:"",telefono:""}));return N.datosPersonales.map((function(t,a){e[a].valid=!0,Object.keys(t).map((function(n,o){switch(n){case"nombre":""==Object.values(t)[o]&&(e[a].nombre="Campo requerido",e[a].valid=!1);break;case"apellido":""==Object.values(t)[o]&&(e[a].apellido="Campo requerido",e[a].valid=!1);break;case"sexo":""==Object.values(t)[o]&&(e[a].sexo="Campo requerido",e[a].valid=!1);break;case"nacionalidad":""==Object.values(t)[o]&&(e[a].nacionalidad="Campo requerido",e[a].valid=!1);break;case"documentoTipo":""==Object.values(t)[o]&&(e[a].documentoTipo="Campo requerido",e[a].valid=!1);break;case"documento":""==Object.values(t)[o]&&(e[a].documento="Campo requerido",e[a].valid=!1);break;case"email":""!=Object.values(t)[o]&&(f=Object.values(t)[o],/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(f))||(e[a].email="Email invalido",e[a].valid=!1);break;case"telefono":""==Object.values(t)[o]&&(e[a].telefono="Campo requerido",e[a].valid=!1);break;case"fechaNacimiento":var r=new Date,i=Object.values(t)[o].split(/[/]/g).reverse(),l=new Date(i[0],i[1],i[2]);if(i[1]>12||i[2]>31){e[a].fechaNacimiento="Fecha Invalida",e[a].valid=!1;break}if(i[2]>new Date(i[0],i[1],0).getDate()){e[a].fechaNacimiento="Fecha Invalida",e[a].valid=!1;break}var s=r.getFullYear()-l.getFullYear(),c=r.getMonth()-l.getMonth();(c<0||0===c&&r.getDate()<l.getDate())&&s--,""==Object.values(t)[o]?(e[a].fechaNacimiento="Campo requerido",e[a].valid=!1):(s<0||0==s&&c<=0&&r.getDate()<l.getDate()||l.getMonth()>12)&&(e[a].fechaNacimiento="Fecha Invalida",e[a].valid=!1);var u=!1;if(x){var d=[{minima:0,maxima:20,fijada:19},{minima:21,maxima:75,fijada:30},{minima:76,maxima:85,fijada:80},{minima:86,maxima:90,fijada:88}],p=Pe.map((function(e){return d.map((function(t){e.edad>=t.minima&&e.edad<=t.maxima&&(e.edadMinima=t.minima,e.edadMaxima=t.maxima)})),e}));s>=p[a].edadMinima&&s<=p[a].edadMaxima&&(u=!0),0==u&&(e[a].fechaNacimiento="La edad no coincide con la cotizaci\xf3n <br> Desde ".concat(p[a].edadMinima," a ").concat(p[a].edadMaxima," a\xf1os"),e[a].valid=!1)}else s>=Pe[a].edadMinima&&s<=Pe[a].edadMaxima&&(u=!0),0==u&&(e[a].fechaNacimiento="La edad debe ser de ".concat(Pe[a].edadMinima," a ").concat(Pe[a].edadMaxima," a\xf1os"),e[a].valid=!1)}var f}))})),e},_e=function(){for(var e=[],t=0;t<N.datosPersonales.length;t++)e.push(Y({},N.datosPersonales[t],{domicilioCalle:"",domicilioNumero:"",domicilioPiso:"",domicilioDpto:"",domicilioCodigoPostal:"",localidad:"",provincia:"",destino:""}));return N.datosPersonales.map((function(t,a){e[a].valid=!0,Object.keys(t).map((function(n,o){if("destino"===n)""!=Object.values(t)[o]&&"default"!=Object.values(t)[o]||(e[a].destino="Campo requerido",e[a].valid=!1)}))})),e},qe=function(e,t){var a=JSON.parse(localStorage.getItem("planContratar"));a&&fbq("track","Purchase",{currency:a.monedaSimbolo,value:a.precio})},Le=function(){var e=U(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,J.eB)().then(function(){var e=U(o().mark((function e(t){var a,n,r,i,l,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[{titular:N.titular,dniTitular:N.dniTitular,metodoDePago:N.tipoTarjeta,tipoTarjeta:N.tipoTarjeta,numeroTarjeta:N.numeroTarjeta,mesVencimiento:N.mesVencimiento,anioVencimiento:N.anioVencimiento,codigoSeguridad:N.codigoSeguridad,cuotas:N.cuotas}],t.tarjetas=a,(n=JSON.parse(localStorage.getItem("planContratar"))).producto.monedaId=n.producto.prestaciones[0].monedaId,n=n.producto,t.personas=ne,t.productos.push(n),t.medioDePago=JSON.parse(localStorage.getItem("planContratar")).medioDePago,t.id_share=null!==(r=JSON.parse(localStorage.getItem("planContratar")).id_share)&&void 0!==r?r:"",e.prev=10,"D-Local"!=t.medioDePago){e.next=16;break}return e.next=14,Me(be,je);case 14:i=e.sent,t.token=i.token;case 16:return(0,V.be)(u.Z.get("location"))&&(qe(p.pathname,t.cotizacionId),l=JSON.parse(localStorage.getItem("planContratar")),(s=[]).push({name:l.producto.nombreB2C,value:l.precio,currency:"USD",items:[{item_id:l.producto.id,item_name:l.producto.nombreB2C,price:l.precio,quantity:1,local_price:l.precioEnPesos,currency:"USD",monedaId:l.monedaId}]}),F.e_(s)),e.next=19,c().post("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/cotizacion/emitir",t);case 19:localStorage.removeItem("correo"),p.push({pathname:"/[userId]/gracias",query:{userId:p.query.userId}}),e.next=30;break;case 23:e.prev=23,e.t0=e.catch(10),console.log(e.t0.response.data),H(!1),e.t0.response.data.message?me(e.t0.response.data.message):me("Error al procesar el pago"),ue(!1),de.current.openModal();case 30:case"end":return e.stop()}}),e,null,[[10,23]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=U(o().mark((function e(){var t,a,n,r,i,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/dlocal/apikey");case 2:t=e.sent,a=t.data[0],n=dlocal(a),r={base:{fontSize:"16px",lineHeight:"18px",fontSmoothing:"antialiased",fontWeight:"500",color:"blue"}},i=n.fields({locale:"en",country:"AR"}),(l=i.create("card",{style:r,hideIcon:!0})).mount(document.getElementById("card-field")),ye(n),Ne(l);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=U(o().mark((function e(){var t,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N.titular,e.next=3,be.createToken(je,{name:t});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ze=function(){var e=JSON.parse(localStorage.getItem("planContratar")).medioDePago;ue(!0);var t=!1,a=N.mesVencimiento.split("/")[0],n=N.mesVencimiento.split("/")[1];return N.mesVencimiento=a,N.anioVencimiento=n,N.cuotas=""==N.cuotas?"1":N.cuotas,"decidir"==e.toLowerCase()&&(N.tipoTarjeta=""==N.tipoTarjeta?"1":N.tipoTarjeta),"decidir"==e.toLowerCase()?ze(N.numeroTarjeta,e)&&""!=N.mesVencimiento&&""!=N.anioVencimiento&&(""==N.codigoSeguridad||3!=N.codigoSeguridad.split("").length&&4!=N.codigoSeguridad.split("").length||""!=N.titular&&""!=N.dniTitular&&""!=N.tipoTarjeta&&(t=!0)):""!=N.titular&&""!=N.dniTitular&&""!=N.tipoTarjeta&&(t=!0),t},ze=function(e,t){if(e=e.replace(/\s+/g,""),"decidir"==t.toLowerCase()){switch(function(e){var t={visa:/^4[0-9]{12}(?:[0-9]{3})/,master:/^5[1-5][0-9]{14}/,american:/^3[47][0-9]{13}/};for(var a in t)if(t[a].test(e))return a}(e)){case"visa":N.tipoTarjeta="1";break;case"master":N.tipoTarjeta="15";break;case"american":N.tipoTarjeta="65"}if(""==N.tipoTarjeta)return!1;N.numeroTarjeta=e,S(N)}return!0};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{ref:Se,className:"lg:text-xl pt-4 md:pt-2 mb-2",children:null===_||void 0===_?void 0:_.etiquetas.Info_FormularioContratacion}),(0,r.jsx)("nav",{children:(0,r.jsxs)("div",{className:"flex gap-4 justify-around lg:rounded-lg bg-transparent lg:bg-gris-claro",children:[(0,r.jsxs)("button",{onClick:function(){De(y,0)},className:"flex-1 flex gap-3 items-center btn py-3 lg:py-6 px-8 ".concat(0===y?"text-white lg:text-principal bg-principal lg:bg-transparent":"text-gris-medio bg-gris-claro lg:bg-transparent"),children:[(0,r.jsx)("span",{className:"w-full lg:w-6 lg:h-6 lg:rounded-full lg:border border-current flex items-center justify-center text-2xl lg:text-base",children:"1"}),(0,r.jsx)("span",{className:"hidden lg:inline",children:null===_||void 0===_?void 0:_.etiquetas.Step2_DatosPasajeros})]}),(0,r.jsxs)("button",{onClick:function(){De(y,1)},className:"flex-1 flex gap-3 items-center btn py-3 lg:py-6 px-8 ".concat(1===y?"text-white lg:text-principal bg-principal lg:bg-transparent":"text-gris-medio bg-gris-claro lg:bg-transparent"),children:[(0,r.jsx)("span",{className:"w-full lg:w-6 lg:h-6 lg:rounded-full lg:border border-current flex items-center justify-center text-2xl lg:text-base",children:"2"}),(0,r.jsx)("span",{className:"hidden lg:inline w-max",children:s("formContratar.estascerca")})]}),(0,r.jsxs)("button",{onClick:function(){De(y,2)},className:"flex-1 flex gap-3 items-center btn py-3 lg:py-6 px-8 ".concat(2===y?"text-white lg:text-principal bg-principal lg:bg-transparent":"text-gris-medio bg-gris-claro lg:bg-transparent"),children:[(0,r.jsx)("span",{className:"w-full lg:w-6 lg:h-6 lg:rounded-full lg:border border-current flex items-center justify-center text-2xl lg:text-base",children:"3"}),(0,r.jsx)("span",{className:"hidden lg:inline",children:null===_||void 0===_?void 0:_.etiquetas.Step5_DatosPasajeros})]})]})}),function(){if(e.ready)switch(y){case 0:return(0,r.jsx)(C,{msgDate:he,setMsgDate:ve,initPersona:f,position:W,setPosition:K,formData:N,setFormData:S,config:_,errors:I.datosPersonales,setErrors:D});case 1:return(0,r.jsx)(T,{firstChange:ie,setFirstChange:le,initPersona:f,position:W,setPosition:K,formData:N,setFormData:S,config:_,errors2:I,errors:I.datosPersonales,setErrors:D});case 2:return(0,r.jsx)(M,{initForm:m,formData:N,position:W,setFormData:S,config:_,errors:I,setErrors:D});default:return null}}(),(0,r.jsxs)("footer",{className:"flex flex-col md:flex-row flex-wrap gap-4 py-8",children:[(0,r.jsx)("button",{className:"py-5 px-6 btn focus:text-principal hover:text-principal btn-gris w-full lg:w-56 text-xl font-bold lg:font-normal disabled:hidden ".concat(0==y?"lg:disabled:hidden":"lg:disabled:block"),disabled:0==y,onClick:function(){w((function(e){return e-1})),Oe()},children:s("buttons.anterior")}),(0,r.jsx)("button",{className:"py-5 px-6 btn btn-amarillo w-full lg:w-56 text-xl font-bold lg:font-normal btn_google_pagar",onClick:function(){De(y),2!=y&&(H(!0),setTimeout((function(){H(!1)}),500)),Oe()},children:y===["Paso 1","Paso 2","Paso 3"].length-1?"".concat(s("buttons.pagar")):null===_||void 0===_?void 0:_.etiquetas.Button_Continuar}),B&&!ee&&(0,r.jsx)("div",{className:"flex items-center justify-center w-20 h-10 mt-5 bg-white bg-opacity-20",children:(0,r.jsx)("img",{src:"/assets/images/BUSCANDO.gif",alt:"loading",className:"flex mx-auto"})}),!B&&!ee&&function(){var e=null;return 0==y&&Fe().map((function(t,a){t.valid||(null!=e?e+="  |  pasajero  ".concat(a+1):e="pasajero "+(a+1))})),1==y&&_e().map((function(t,a){t.valid||(e=" Datos de facturacion ")})),null!=e?(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)("p",{children:[s("formContratar.completarPasajero")," ",(0,r.jsx)("strong",{children:e})]})}):null}(),ce&&(0,r.jsx)(Z.Z,{}),(0,r.jsx)($.Z,{ref:de,children:(0,r.jsx)("article",{className:"w-full min-h-[200px] max-w-screen-md max-h-full flex flex-col text-principal bg-white rounded-lg shadow-xl overflow-hidden",children:(0,r.jsxs)("header",{className:"relative w-full h-full flex p-6 md:p-10 ",children:[(0,r.jsxs)("span",{className:"icon-ico-alert text-3xl lg:text-6xl","aria-hidden":"true",children:[(0,r.jsx)("span",{className:"path1 text-amarillo"}),(0,r.jsx)("span",{className:"path2 text-principal"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-3 md:gap-4 p-4",children:[(0,r.jsx)("h2",{className:"text-2xl md:text-4xl font-bold leading-none md:leading-10",children:null===_||void 0===_?void 0:_.etiquetas.Title_TransaccionIncompleta}),(0,r.jsxs)("h3",{className:"text-xl leading-none md:leading-10 font-bold",children:["Error: ",fe]}),(0,r.jsx)("span",{className:"flex-1 flex items-center leading-none",children:null===_||void 0===_?void 0:_.etiquetas.Label_IntenteNuevamente})]})]})})})]})]})},W=a(7872);function K(e){var t=e.phone;(0,l.useRouter)();return(0,i.useEffect)((function(){document.body.classList.add("overflow-hidden")}),[]),(0,r.jsx)("div",{className:"fixed z-50 inset-0 w-full h-full flex items-center justify-center bg-white bg-opacity-60",children:(0,r.jsxs)("div",{className:"flex flex-col gap-10 items-center",children:[(0,r.jsxs)("span",{className:"icon-ico-alert text-3xl lg:text-6xl ","aria-hidden":"true",children:[(0,r.jsx)("span",{className:"path1 text-amarillo"}),(0,r.jsx)("span",{className:"path2 text-principal"})]}),(0,r.jsxs)("h3",{className:"text-principal text-center text-4xl font-extrabold",children:["Esta oferta ya caduc\xf3 ",(0,r.jsx)("br",{})," Vuelve a contactar con tu vendedor"]}),(0,r.jsx)("a",{href:"https://wa.me/".concat(t),target:"_blank",rel:"noreferrer",className:"flex-1 text-center cursor-pointer py-5 px-6 rounded bg-terciario btn btn-amarillo lg:w-56 shadow-2xl shadow-amarillo hover:shadow-principal focus:shadow-principal",children:"Contactar"})]})})}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function ee(e,t,a,n,o,r,i){try{var l=e[r](i),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,o)}function te(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(e){ee(r,n,o,i,l,"next",e)}function l(e){ee(r,n,o,i,l,"throw",e)}i(void 0)}))}}function ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){ae(e,t,a[t])}))}return e}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,o,r=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(r.push(n.value),!t||r.length!==t);i=!0);}catch(s){l=!0,o=s}finally{try{i||null==a.return||a.return()}finally{if(l)throw o}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(){var e,t,a,n=oe((0,d.$)("global"),2),s=n[0],p=(n[1],(0,l.useRouter)()),g=(0,i.useState)(void 0),x=(g[0],g[1]),b=(0,i.useState)(null),y=b[0],w=b[1],j=(0,i.useState)(""),N=j[0],S=j[1],C=(0,i.useState)(null),P=C[0],k=C[1],O=(0,W.TH)(),I=(O.location,O.setLocation),D=(0,i.useState)(0),T=D[0],E=D[1],F=(0,v.ZR)(),_=F.config,q=F.setConfig,L=(0,h.Sy)(),A=L.isShared,M=L.setIsShared,Z=oe((0,m._)("etiquetas",""),2),z=Z[0],$=Z[1],V=(0,i.useState)(null),R=(V[0],V[1]),B=(0,i.useState)(!1),U=B[0],H=B[1],Y=(0,i.useState)(!1),X=Y[0],Q=Y[1],ee=(0,i.useState)(!0),ae=ee[0],re=ee[1],ie=(0,i.useState)(""),le=ie[0],se=ie[1],ce=(0,i.useState)(""),ue=ce[0],de=ce[1],pe=oe((0,m._)("promoActual",""),2),fe=(pe[0],pe[1]),me=(0,i.useRef)("LAT"),ge=(0,i.useState)(""),he=(ge[0],ge[1]);(0,i.useEffect)((function(){if(window.location.href.includes("?"))M(!0);else if(M(!1),localStorage.getItem("correo")&&se(localStorage.getItem("correo")),u.Z.get("location")&&u.Z.get("cotizacionID")){var e=u.Z.get("location"),t=u.Z.get("cotizacionID");I(e),R(t),Se(t),H(!0),Q(!0)}else p.replace("/")}),[]),(0,i.useEffect)((function(){if(A){var e=p.query.idContratar;x(e),xe(),H(!0)}}),[p.query]),(0,i.useEffect)((function(){me.current=u.Z.get("location"),ve()}));var ve=function(){if(z){var e,t=null===(e=null===z||void 0===z?void 0:z.paises.filter((function(e){return e.codigo==me.current}))[0])||void 0===e?void 0:e.nombre.toLowerCase();he(t)}else he(me.current)};(0,i.useEffect)((function(){ve()}),[me.current]);var xe=function(){var e=te(o().mark((function e(){var t,a,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),t="",e.prev=2,a=p.asPath.split("?")[1].split("=")[1],e.next=6,c().get("https://apieurop-assistance.byflexy.com/api/v2/shares/"+a+"/detail");case 6:null==(n=e.sent).data.response&&p.push({pathname:"/[userId]",query:{userId:p.query.userId}}),r=JSON.parse(JSON.parse(n.data.response.json)).sigla||"argentina",t=JSON.parse(n.data.response.json),(t=JSON.parse(t).data).producto.id_store=r,t.producto.id_share=a,se(JSON.parse(JSON.parse(n.data.response.json)).data.producto.correo),be(n.data.response),de(n.data.response.phone),u.Z.set("cotizacionID",t.cotizacionId),localStorage.setItem("planContratar",JSON.stringify(t.producto)),Q(!0),t.producto.fechaDesde=t.producto.fechaDesde.split(" ")[0],t.producto.fechaHasta=t.producto.fechaHasta.split(" ")[0],w(t.producto),ye(t.producto.regionId),"argentina"!=r.toLowerCase()?(u.Z.set("location",r),I(r)):(u.Z.set("location","ARGENTINA"),I("ARGENTINA")),we(t),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(2),console.log("error:",e.t0);case 30:case"end":return e.stop()}}),e,null,[[2,27]])})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=te(o().mark((function e(t){var a,n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.status,n=t.json,r=!0,i=JSON.parse(n),i=JSON.parse(i).data,"inactive"!=a){e.next=8;break}r=!1,e.next=18;break;case 8:return e.prev=8,e.next=11,c().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/cotizacion?cotizacionId="+i.cotizacionId);case 11:e.sent,r=!0,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),r=!1;case 18:re(r);case 19:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}(),ye=function(e){(0,J.ur)(u.Z.get("location")).then((function(t){var a=t.filter((function(t){return t.id==e}));S(a[0].nombreB2C)}))},we=function(e){(0,J.FS)(u.Z.get("location")).then((function(t){u.Z.set("promoActual",JSON.stringify(t)),fe(t),e.producto.promocion=t,k(e.producto),Ce(e)}))},je=function(){var e=te(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,J.FS)(u.Z.get("location"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(e,t){var a=new Date(e[0],e[1]-1,e[2]),n=new Date(t[0],t[1]-1,t[2]),o=n>a?n-a:a-n,r=Math.floor(o/864e5);E(r)},Se=function(){var e=te(o().mark((function e(){var t,a,n,r,i,l,s,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=u.Z.get("cotizacionID"),(a=JSON.parse(localStorage.getItem("planContratar"))).fechaDesde=a.fechaDesde.split(" ")[0],a.fechaHasta=a.fechaHasta.split(" ")[0],w(a),Ne(a.fechaDesde.split(" ")[0].split("/").reverse(),a.fechaHasta.split(" ")[0].split("/").reverse()),e.next=9,c().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/search?cotizacionId="+t);case 9:return n=e.sent,r=n.data[0],i=null,l=null,r.productos.map((function(e,t){e.producto.id==a.producto.id&&(i=e,l=e.monedaId)})),(s={}).cotizacionId=t,e.next=18,je();case 18:d=e.sent,i.producto.monedaId=l,s.producto=ne({},i,{id:a.id,producto:i.producto,promocion:d}),s.personas=s.producto.personas,k(s.producto),S(r.region),Ce(s),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(0),console.log("err=> ",e.t0),400==e.t0.response.data.code&&p.push({pathname:"/[userId]",query:{userId:p.query.userId}});case 31:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=te(o().mark((function e(t){var a,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c().post("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/cotizacion/producto",t);case 3:a=e.sent,n=a.data[0],u.Z.set("cotizacionID",n.cotizacionId),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=te(o().mark((function e(){var t,a,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=u.Z.get("location")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,c().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/config?codigo="+t);case 6:a=e.sent,n=a.data[0],q(n),$(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.response.data);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){localStorage.getItem("etiquetas")?q(z):Pe()}),[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f(),{src:"https://js.dlocal.com/"}),!ae&&(0,r.jsx)(K,{phone:ue}),(0,r.jsxs)("section",{className:"w-full text-principal",children:[(0,r.jsx)("h1",{className:"max-w-screen-xl mx-auto text-4xl font-extrabold pt-8 lg:pt-10 px-6 2xl:px-0",children:null===_||void 0===_?void 0:_.etiquetas.Title_Contratacion}),(0,r.jsxs)("div",{className:"max-w-screen-xl mx-auto flex flex-col lg:flex-row justify-center gap-6 lg:gap-8 px-6 2xl:px-0 pb-14",children:[(0,r.jsx)("div",{className:"flex-1 flex flex-col order-2 lg:order-1",children:U&&(0,r.jsx)(G,{correo:le,producto:P,ready:X})}),(0,r.jsxs)("div",{className:"lg:w-1/4 flex flex-col order-1 lg:order-2",children:[(0,r.jsx)("h2",{className:"lg:text-xl pt-2 mb-2",children:null===_||void 0===_?void 0:_.etiquetas.Info_DetalleContratacion}),(0,r.jsx)("article",{className:"flex flex-col rounded-lg shadow-3xl overflow-hidden",children:null!=y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("header",{className:"w-full py-6 px-8 bg-turquesa",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold",children:y.producto.nombreB2C}),(0,r.jsx)("p",{className:"font-light",children:y.producto.descripcion})]}),(0,r.jsxs)("div",{className:"w-full py-6 px-8 flex flex-col gap-1",children:[T?(0,r.jsxs)("h2",{className:"font-bold",children:[s("formContratar.estadia")," ",T," ",null===_||void 0===_?void 0:_.etiquetas.Label_Dias,"  "]}):(0,r.jsx)(r.Fragment,{}),(0,r.jsxs)("p",{className:"flex gap-3 items-center text-sm font-light",children:[(0,r.jsx)("span",{className:"icon-calendario text-lg text-gris-medio"}),s("formContratar.del")," ",y.fechaDesde," ",null===_||void 0===_?void 0:_.etiquetas.Label_SeparadorFechas," ",y.fechaHasta," Inclusive"]}),(0,r.jsxs)("p",{className:"flex gap-3 items-center text-sm font-light",children:[(0,r.jsx)("span",{className:"icon-pasajeros text-lg text-gris-medio"}),y.personas.length," ",null===_||void 0===_?void 0:_.etiquetas.Label_Pasajeros]}),(0,r.jsxs)("p",{className:"flex gap-3 items-center text-sm font-light",children:[(0,r.jsx)("span",{className:"icon-marker text-lg text-gris-medio"}),N]}),(0,r.jsxs)("div",{className:"flex gap-3 items-center justify-between border-t-2 border-gris-claro pt-5 mt-5",children:[(0,r.jsx)("p",{className:"font-extrabold text-lg",children:null===_||void 0===_?void 0:_.etiquetas.Label_DetalleTotal}),"decidir"==(null===(e=y.medioDePago)||void 0===e?void 0:e.toLowerCase())?(0,r.jsxs)("p",{className:"flex-1 flex flex-col items-end",children:[(null===(t=y.promocion)||void 0===t?void 0:t.length)>0?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("span",{className:"text-gris-medio line-through font-light text-sm leading-none",children:[y.monedaLocalSimbolo,"  ",(0,m.ao)(Number(y.tipoDeCambioMonto.replace(",","."))*y.precioSinPromocion)]})}):null,(0,r.jsxs)("span",{className:"text-lg font-extrabold",children:[y.monedaLocalSimbolo," ",(0,m.ao)(y.precioEnPesos)]}),(0,r.jsxs)("span",{className:"text-lg leading-none",children:[y.monedaSimbolo," ",(0,m.ao)(y.precio)]})]}):(0,r.jsxs)("p",{className:"flex-1 flex flex-col items-end",children:[(null===(a=y.promocion)||void 0===a?void 0:a.length)>0?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("span",{className:"text-gris-medio line-through font-light text-sm leading-none",children:[y.monedaSimbolo,"  ",(0,m.ao)(y.precioSinPromocion)]})}):null,(0,r.jsxs)("span",{className:"text-lg font-extrabold",children:[y.monedaSimbolo," ",(0,m.ao)(y.precio)]})]})]})]})]}):null})]})]})]})]})}}},function(e){e.O(0,[520,361,774,888,179],(function(){return t=9642,e(e.s=t);var t}));var t=e.O();_N_E=t}]);